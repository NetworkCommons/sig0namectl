# sig0namectl

## DNSSEC Zone configuration for primary DNS servers

### DNSSEC

DNSSEC must be enabled in all parent zones.

In a primary authorative BIND9 DNS server zone configuration, this can be enabled, for example, the following enables DNSSEC in the **`zenr.io`** zone :

        type master;
        file "dynamic/zenr.io/named.zenr.io";
        key-directory "dynamic/zenr.io";
        auto-dnssec maintain;
 

### Dynamic zone update policy configuration

Each dynamic DNSSEC update zone to be managed by sig0namectl must have at least one (or more) KEY resource records that are granted update permissions for within that dynamic zone.


In a primary authorative BIND9 DNS server zone configuration, this can be enabled. for example, the following allows updates for **`zenr.io`** zone using:

Firstly, an initial zone management keypair with the label **`vortex.zenr.io`** is generated by invoking

    ./register_key vortex.zenr.io

 (or using dnssec-keygen directly) and the contents of the public key file is copied into a corresponding KEY RR into the `zenr.io` zonefile.

Secondly, a dynamic DNSSEC update policy is applied to the `zenr.io` zone configuration

        update-policy {
                grant "vortex.zenr.io" name zenr.io. ANY;
                grant "vortex.zenr.io" subdomain zenr.io. ANY;
                grant * selfsub . ANY;
        };

A BIND DNS server authenticates signed update requests only for SIG(0) KEY RRs in zones for which it is authoritative.


### Dynamic Subzone for named key registration requests

A subzone with dynamic DNS is configured to allow clients to submit named key requests below the zone. The default subzone registration policy is to allow all registration requests for any new label with **no existing resource records of any type**. This default registration policy is also known as "First Come, First Served".

sig0namectl uses the environment variable `SIGNAL_SUBZONE` to define the subzone where name requests are managed. It can be set though configuration files or overriden on command line invocation.

Default value in **`env`** configuation file:

`SIGNAL_SUBZONE="_signal"`

Zone keys allow for a scripted policy to be applied to name requests placed in this 'holding zone'. If the policy is successful, the zone key is used with `nsupdate` to update the parent zone of **`${SIGNAL_SUBZONE}`** with the requested named KEY resource record (the FQDN without the `${SIGNAL_SUBZONE}` label).

